(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(8),l=a.n(s),r=(a(14),a(2)),o=a(3),c=a(5),u=a(4),h=(a(15),a(1)),d=a(6),m=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={login:"",password:""},n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){var t=e.target.name;this.setState(Object(d.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.send({login:this.state.login,password:this.state.password,type:"signin"})}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit,className:"registration"},i.a.createElement("h3",null,"Sign In"),i.a.createElement("input",{type:"login",className:"input-text",name:"login",placeholder:"Login",style:{marginTop:"50px"},value:this.state.login,onChange:this.handleChange,required:!0}),i.a.createElement("input",{type:"password",className:"input-text",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0}),i.a.createElement("div",{className:"block-f-btn"},i.a.createElement("input",{type:"submit",className:"input-btn",value:"Send"})))}}]),a}(n.Component),p=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleState=function(){n.setState({toggle:!n.state.toggle})},n.state={toggle:!1},n.toggleState=n.toggleState.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"wrapper"},i.a.createElement(m,{toggle:this.toggleState,send:this.props.send}))}}]),a}(n.Component),g=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={btnIsActive:!0},n.activeBtn=n.activeBtn.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"activeBtn",value:function(){this.setState({btnIsActive:!this.state.btnIsActive}),this.props.click({btnIsActive:this.state.btnIsActive})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:this.state.btnIsActive?"btn":"change btn",onClick:this.activeBtn},i.a.createElement("div",{className:"bar1"}),i.a.createElement("div",{className:"bar2"}),i.a.createElement("div",{className:"bar3"})))}}]),a}(n.Component),f=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this)).fileSelecthandler=function(e){var t=e.target.files[0];n.setState({selectedFile:t})},n.state={obj:null,selectedFile:null,purpose:"",comment:""},n.send=n.send.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){var t=e.target.name;this.setState(Object(d.a)({},t,e.target.value))}},{key:"send",value:function(e){if(e.preventDefault(),null!==this.state.selectedFile){var t=new FormData;t.append("file",this.state.selectedFile);var a={login:this.props.sessionData.login,purpose:this.state.purpose,comment:this.state.comment};this.setState({selectedFile:null,purpose:"",comment:""}),fetch("http://test.ru/uploadfile/"+JSON.stringify(a),{method:"POST",body:t})}}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Upload Report"),i.a.createElement("form",{className:"form-upload"},i.a.createElement("input",{type:"text",name:"purpose",className:"input-text",value:this.state.purpose,placeholder:"Purpose",style:{marginLeft:"0"},onChange:this.handleChange,required:!0}),i.a.createElement("input",{type:"text",name:"comment",className:"input-text",value:this.state.comment,placeholder:"Comment",onChange:this.handleChange,required:!0}),i.a.createElement("div",null,i.a.createElement("input",{type:"file",name:"file",id:"file",className:"input-file",onChange:this.fileSelecthandler,required:!0}),i.a.createElement("label",{for:"file"},"Choose a file"),i.a.createElement("input",{type:"submit",className:"input-btn",value:"Send",style:{marginTop:"15px"},onClick:this.send}))))}}]),a}(n.Component),b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={items:[],object:{},wasDeleted:!1,order:!1},n.delete=n.delete.bind(Object(h.a)(n)),n.order=n.order.bind(Object(h.a)(n)),n.accept=n.accept.bind(Object(h.a)(n)),n.decline=n.decline.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"delete",value:function(e){var t=this.state.items.find((function(t){if(t.file_id===e.target.name)return t}));console.log(e.target.name),this.setState({object:t,wasDeleted:!0})}},{key:"accept",value:function(e){var t={id:e.target.name};fetch("http://test.ru/accept/"+JSON.stringify(t),{method:"GET",headers:{"Content-type":"application/json"}});var a=this.state.items.find((function(t){if(t.id===e.target.name)return t.state="Accept"}));this.setState({object:a})}},{key:"decline",value:function(e){var t={id:e.target.name};fetch("http://test.ru/decline/"+JSON.stringify(t),{method:"GET",headers:{"Content-type":"application/json"}});var a=this.state.items.find((function(t){if(t.id===e.target.name)return t.state="Decline"}));this.setState({object:a})}},{key:"componentDidUpdate",value:function(){var e=this;if(!1!==this.state.wasDeleted){var t=this.state.items,a=this.state.object,n={object:this.state.object,rights:1},i=JSON.stringify(n);i=i.replace(/\\\\/g,";;"),fetch("http://test.ru/deletereport/"+i,{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(n){"file is delete"===n?(t=t.filter((function(e){return e.id!==a.id})),e.setState({wasDeleted:!1,items:t})):console.log("Something is wrong")}))}}},{key:"order",value:function(){var e=this;this.setState({order:!this.state.order});var t={login:this.props.sessionData.login,rights:this.props.sessionData.rights,order:this.state.order};fetch("http://test.ru/getreports/"+JSON.stringify(t)).then((function(e){return e.json()})).then((function(t){e.setState({items:t})}))}},{key:"componentDidMount",value:function(){var e=this,t={login:this.props.sessionData.login,rights:this.props.sessionData.rights,order:this.state.order};console.log(t),fetch("http://test.ru/getreports/"+JSON.stringify(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({items:t}),console.log(t)}))}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Reports by users"),i.a.createElement("li",{className:"barside"},i.a.createElement("div",{style:{width:"20%",fontSize:"14px"}},"Purpose"),i.a.createElement("div",{style:{width:"38%",fontSize:"14px"}},"Comment"),i.a.createElement("div",{style:{width:"10%",fontSize:"14px"}},"State"),i.a.createElement("div",{onClick:this.order,style:{width:"15%",fontSize:"14px",cursor:"pointer",backgroundColor:this.state.order?"limegreen":"lightgray"}},"Date&Time"),i.a.createElement("div",{style:{width:"15%",border:"none",fontSize:"14px"}},"Action")),i.a.createElement("ul",null,this.state.items?this.state.items.map((function(t){return i.a.createElement("li",{className:"items",key:t.id},i.a.createElement("div",{style:{width:"20%"}},t.purpose),i.a.createElement("div",{style:{width:"38%"}},t.comment),i.a.createElement("div",{style:{width:"10%"}},t.state),i.a.createElement("div",{style:{width:"15%",fontSize:"12px"}},t.date+" "+t.time),i.a.createElement("div",{style:{width:"15%"}},i.a.createElement("a",{href:"http://test.ru/download/"+JSON.stringify(t.id),name:t.id,style:{color:"greenyellow"},download:!0},"\u21d3"),i.a.createElement("button",{name:t.file_id,onClick:e.delete,style:{color:"red"}},"\u2612"),i.a.createElement("a",{name:t.id,onClick:e.accept,style:{color:"green"}},"\u2714"),i.a.createElement("a",{name:t.id,onClick:e.decline,style:{color:"red"}},"\u2718")))})):i.a.createElement("li",{style:{listStyle:"none",width:"100%",textAlign:"center"}},i.a.createElement("p",null,"Nothing to show."))))}}]),a}(n.Component),v=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleValue=function(e){n.setState({btnIsActive:e.btnIsActive})},n.state={btnIsActive:!1,Panel:!0,Upload:!1,Logout:!1},n.toggleValue=n.toggleValue.bind(Object(h.a)(n)),n.switching=n.switching.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"switching",value:function(e){switch(e.type){case"Panel":this.setState({Panel:!0,Upload:!1});break;case"Upload":this.setState({Panel:!1,Upload:!0});break;case"Logout":console.log("Logout action"),this.props.logout({isAuth:!1});break;default:console.log("Something is wrong")}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"main-panel"},i.a.createElement("div",{className:"top-bar"},i.a.createElement(g,{click:this.toggleValue}),i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("p",{style:{float:"right",fontSize:"20px"}},this.props.login.username))),i.a.createElement("div",{className:"main-bar"},i.a.createElement("div",{className:"left-bar",style:this.state.btnIsActive?{display:"block"}:{display:"none"}},i.a.createElement("ul",null,i.a.createElement("li",{className:"menu",onClick:function(t){return e.switching({type:"Panel"})}},"Panel"),i.a.createElement("li",{className:"menu",onClick:function(t){return e.switching({type:"Upload"})}},"Upload"),i.a.createElement("li",{className:"menu",onClick:function(t){return e.switching({type:"Logout"})}},"Logout"))),i.a.createElement("div",{className:"right-bar",style:this.state.btnIsActive?{width:"80vw"}:{width:"100%"}},this.state.Panel&&i.a.createElement(b,{sessionData:this.props.login}),this.state.Upload&&i.a.createElement(f,{sessionData:this.props.login}))))}}]),a}(n.Component),y={isAuth:!1,username:"",login:"",password:"",action:""},E=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).logout=function(e){n.setState(e),n.setState({login:""}),y.isAuth=!1,y.username=""},n.authentication=function(e){n.setState({action:e.type,login:e.login,password:e.password}),e.username&&n.setState({username:e.username})},n.state={isAuth:!1,action:"",login:"",password:"",username:"",rights:""},n}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(){var e=this,t=String(this.state.password),a=String(this.state.login),n=String(this.state.username);if(y.isAuth===this.state.isAuth)console.log("is auth?:"+y.isAuth);else if(a.length>=5&&t.length>=5){var i={login:a,password:t,username:n},s="http://test.ru/adminAuth/"+JSON.stringify(i);fetch(s,{method:"GET"}).then((function(e){return e.json()})).then((function(t){!1!==t?(e.setState({login:t.login,username:t.username,rights:t.rights}),e.setState({isAuth:!0}),a=e.state.login):alert("Login or password is wrong.")}))}}},{key:"render",value:function(){var e=this.state;return y.username=e.username,y.login=e.login,y.isAuth=!0,i.a.createElement("div",{className:"wrapper"},this.state.isAuth?i.a.createElement(v,{login:this.state,logout:this.logout}):i.a.createElement(p,{send:this.authentication}))}}]),a}(n.Component);l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(E,null)),document.getElementById("root"))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.ab0ceff4.chunk.js.map